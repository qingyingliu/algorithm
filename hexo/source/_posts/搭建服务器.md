---
layout: post
title: 搭建服务器
date: 2018-11-16 16:43:02
categories: ubuntu
---
今天买了一个阿里云服务器，为了就是想让自己写的网页也能够在校外网打开。下面一步一步搭建我的服务器。

### 安装SSH
安装SSH的原因是为了能够在本地的电脑连接服务器。

1. Ubuntu缺省没有安装SSH Server，使用这个命令安装：`sudo apt-get install openssh-server`、
2. 然后确认sshserver是否启动了。`ps -e|grep ssh`。如果看到sshd那说明ssh-server已经启动了，如下图所示。
![](/uploads/1542358069.png)
3. 启动SSH。`sudo/etc/init.d/ssh start`

<!--more-->
### 安装mysql

购买服务器肯定是需要安装数据库的。没有数据库，什么事情都做不了。下面我来介绍在linux服务器上mysql的安装。

1. 更新软件源。注意，在没有更新之前可能会出错，所以这一步是很需要的（亲测）。`sudo apt-get update`
2. 更新软件源之后，我们就可以接着安装mysql服务器端和客户端了。安装的命令：`sudo apt-get install mysql-server mysql-client`。
3. 设置密码。
   ![](/uploads/msql.png)
4. 设置完密码之后我们就可以登陆：`mysql -u root -p`。
   但是这个时候我们需要远程连接数据库，所以这个时候我们需要远程连接数据库。
5. 远程连接数据库。可以查看我上一篇文章。[mysql远程连接](https://lewin671.github.io/2018/11/16/mysql%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/)

### 安装jdk

1. 先在官网下载jdk
2. 把jdk压缩包传给服务器，通过**WinSCP**软件就可以，很方便。
3. 把压缩包放在`usr/local/java`文件夹中，进行解压：`tar zxvf jdk-7u45-linux-x64.gz`
4. 修改环境变量。`vim /etc/profile`。在`/etc/profile`文件的最后面添加下面的语句：
   
```
JAVA_HOME=/opt/java/jdk1.7.0_45
JRE_HOME=$JAVA_HOME/jre
PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin
CLASSPATH=.:$JAVA_HOME/lib/jt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib
export JAVA_HOME JRE_HOME PATH CLASSPATH
```

注意把jdk的版本改成你自己的版本就行了。

### 安装Apache-Tomcat
1. 通过**WinSCP**把`apache-tomcat-8.0.53.tar.gz`传到服务器的`/home/server/apache-tomcat`文件夹。
2. 解压缩`apache-tomcat-8.0.53.tar.gz`。` tar zxvf apache-tomcat-8.0.53.tar.gz`。
3. 配置bin文件的startup.sh和shutdown.sh。在文件最后面添加下面的语句：
```
JAVA_HOME=/opt/java/jdk1.7.0_45
JRE_HOME=$JAVA_HOME/jre
PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin
CLASSPATH=.:$JAVA_HOME/lib/jt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib
export JAVA_HOME JRE_HOME PATH CLASSPATH
TOMCAT_HOME=/home/server/apache-tomcat/apache-tomcat-8.0.53
```
    注意： jdk和apache-tomcat的路径根据自己的实际路径填写。
4. 开启apache-tomcat。`./bin/startup.sh`。如果成功，则会出现下面的提示：

```
Using CATALINA_BASE:   /home/server/apache-tomcat/apache-tomcat-8.0.53
Using CATALINA_HOME:   /home/server/apache-tomcat/apache-tomcat-8.0.53
Using CATALINA_TMPDIR: /home/server/apache-tomcat/apache-tomcat-8.0.53/temp
Using JRE_HOME:        /opt/java/jdk1.7.0_45/jre
Using CLASSPATH:       /home/server/apache-tomcat/apache-tomcat-8.0.53/bin/bootstrap.jar:/home/server/apache-tomcat/apache-tomcat-8.0.53/bin/tomcat-juli.jar
Tomcat started.
```