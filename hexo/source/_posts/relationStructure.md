---
layout: post
title: 关系数据结构及其形式化定义
date: 2018-10-04 12:56:36
categories: data-base
mathjax: true
description: 关系数据结构及其相关概念
---
## 关系数据结构的相关概念
### 域(domain)
**定义**： 域是一组具有**相同数据类型**的值的**集合**。

例如，自然数、整数、实数、{男、女}等集合都可以是域。
### 笛卡儿积(cartesian product)
**定义**：给定一组域$D_1,D_2,...,D_n$,允许其中某些域是相同的，$D_1,D_2,...,D_n$的笛卡儿积为：
$D_1×D_2×...×D_n$={$(d_1,d_2,...,d_n):d_i∈D_i ，i=1,2,...,n$}.

**定义**：笛卡儿积的每个元素叫做**元组(tuple)**（或者也叫记录）,也叫做**n元组(n-tuple)**.

**定义**：元组中的每个分量$d_i$叫做**分量(component)**。

**定义**：一个域允许的不同取值的个数叫做这个域的**基数(cardinal number)**。若$D_i$为有限集，则$D_1×D_2×...×D_n$的基数M为：
$\prod_{i=0}^n{m_i}$

例如，给出三个域：

$D_1$=导师集合SUPERVISOR={张清攻，刘毅}

$D_2$=专业集合SPECIALITY={计科，软工}

$D_3$=学生集合SUPERVISOR={李勇，刘晨，王敏}

则$D_1、D_2、D_3$的笛卡儿积为：$D_1×D_2×D_3$={
	(张清攻，计科，李勇)，(张清攻，计科，刘晨)，(张清攻，计科，王敏)，
	(张清攻，软工，李勇)，(张清攻，软工，刘晨)，(张清攻，软工，王敏)，
	(刘毅，计科，李勇)，(刘毅，计科，刘晨)，(刘毅，计科，王敏)，
	(刘毅，软工，李勇)，(刘毅，软工，刘晨)，(刘毅，软工，王敏)
}

其中(张清攻，计科，李勇)、(张清攻，计科，刘晨)等都是元组。张清攻、计科、李勇等都是分量。
该笛卡儿积的基数为M=2×2×3=12

### 关系(relation)
**定义**:$D_1×D_2×...×D_n$的子集叫做**在域$D_1、D_2、D_3$上的关系**，表示为：R($D_1$,$D_2$,...,$D_n$),这里R表示关系的名字，n是关系的**目或度(degree)**。
直观地看，关系其实就是一张二维的表，表的每行对应一个元组，表的每一列对应一个域。

**定义**:由于域可以相同，为了加以区分，必须对每列起一个名字，称为**属性(attribute)**。n目关系必有n个属性。

**码**就是能唯一标识实体的属性，他是整个实体集的性质，而不是单个实体的性质。它包括超码，候选码，主码

**定义： 超码(superkey)是一个或多个属性的集合，这些属性可以让我们在一个实体集中唯一地标识一个实体。如果K是一个超码，那么K的任意超集也是超码，也就是说如果K是超码，那么所有包含K的集合也是超码**

**定义**： **候选码(candidate key)**是最小超码，它们的任意真子集都不能成为超码。如果一个关系中有多个候选码，则选其中一个为**主码(primary key)或者主属性**。

例如，可以发现上面的那个例子中的笛卡儿积中很多元组都没有意义。因为在一个学校中的一个专业方向有多个导师，而一个导师只在一个专业方向带学生；一个导师可以带多名学生，但是一名学生只有一个导师，一个专业方向。因此它的子集才是有意义的，才可以表示导师和学生的关系，把改关系取名为SAS，如下表所示：

SUPERVISOR|SPECIALITY|STUDENT
---|---|---
张清攻|计科|李勇
张清攻|计科|刘晨
刘毅|软工|王敏

把关系SAS的属性取名为域名，则这个关系可以表示为：SAS(SUPERVISOR,SPECIALITY,STUDENT).

假设学生不会重名，则STUDENT中的每一个值都唯一地标识了一个元组，因此可以作为SAS的主码。

## 关系的三种类型
关系可以有三种类型：基本类型（又称基本表或基表）、查询表和视图表。

1. 基本表：它是实际存在的表，它是实际储存数据的逻辑表示。
2. 查询表：查询表是查询对应的表
3. 视图表：视图表是由基本表或其他视图表导出的表，是虚表，不对应实际储存数据。

## 关系的限定和扩充
1. 无限关系在数据库系统中是无意义的。因此限定关系数据模型中的关系必须是有限集合。
2. 通过为关系的每一列附加一个属性名的方法取消关系属性的有序性，即$(d_1,d_2,...,d_i,d_j,...,d_n)=(d_1,_d2,...,d_j,_di,...,d_n)$

因此，**基本表**具有一下6条性质：
1. 列是同质(homogeneous)的，即**每一列中的分量是同一类型的数据，来自同一个域**
2. 不同的列可以出自同一个域，称其中的每一列为一个属性，不同的属性要给予不同的属性名。例如在上面的例子中，我们也可以只给出两个域：
    
	人(PERSON)={张清攻，刘毅，李勇，刘晨，王敏}
    
	专业(SPECIALITY)={计科，软工}
	
    **为了避免混淆，必须给这两个属性取不同的属性名，而不能直接使用域名。**
3. 列的顺序无所谓,即列的次序可以任意交换。
4. 任意两个元组的候选码不能取相同的值。
5. 行的顺序无所谓，即行的次序可以任意交换。
6. 分量必须取原子值，即每一个分量必须是不可再分的数据项。

## 关系模式
在数据库中要区分型和值。在关系数据库中，关系模式是型，关系是值。关系模式是对关系的描述。

**定义**：关系的描述称为**关系模式(relation schema)**。它可以形式化地表示为:R(U,D,DOM,F)。

其中R为关系名，D为U中属性所来自的域，U是组成该关系的属性名集合，DOM是属性向域的映像集合，F是属性间的依赖关系集合。

关系模式通常可以简记为R(U)或者$R(A_1,A_2,...A_n)$，其中R为关系名，$A_1,A_2,...A_n$为属性名。

而属性向域的映像常常直接说明为属性的类型、长度。在上面例子中，由于导师和研究生出自同一个域—人，所以要取不同的属性名，并在模式中定义属性向域的映象，即说明它们分别出自哪个域，如：dom（SUPERVISOR-PERSON）=dom（STUDENT）=PERSON